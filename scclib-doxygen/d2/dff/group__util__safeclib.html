<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>scclib: Signal-safe C library wrapper</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">scclib
   </div>
   <div id="projectbrief">Stable Cloud Computing C++ Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Signal-safe C library wrapper<div class="ingroups"><a class="el" href="../../d4/d3a/group__util.html">general utilities</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides signal safe wrapper for commonly used C library APIs.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Signal-safe C library wrapper:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/dff/group__util__safeclib.png" border="0" usemap="#d2_2dff_2group____util____safeclib" alt=""/></div>
<map name="d2_2dff_2group____util____safeclib" id="d2_2dff_2group____util____safeclib">
<area shape="rect" title="Provides signal safe wrapper for commonly used C library APIs." alt="" coords="177,5,332,45"/>
<area shape="rect" href="../../d4/d3a/group__util.html" title=" " alt="" coords="5,13,129,38"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:d3/d76/safe__clib_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d76/safe__clib_8h.html">safe_clib.h</a></td></tr>
<tr class="memdesc:d3/d76/safe__clib_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal-safe C library wrapper. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/df5/safe__clib_8cc"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df5/safe__clib_8cc.html">safe_clib.cc</a></td></tr>
<tr class="memdesc:dd/df5/safe__clib_8cc"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d2/dff/group__util__safeclib.html">Signal-safe C library wrapper</a> implementation <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d5/d0a/unittest_2safe__clib_8cc"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d0a/unittest_2safe__clib_8cc.html">safe_clib.cc</a></td></tr>
<tr class="memdesc:d5/d0a/unittest_2safe__clib_8cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests for <a class="el" href="../../d2/dff/group__util__safeclib.html">Signal-safe C library wrapper</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga05dc7ef7190e8678dbd2099b7266225d"><td class="memItemLeft" align="right" valign="top"><a id="ga05dc7ef7190e8678dbd2099b7266225d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga05dc7ef7190e8678dbd2099b7266225d">scc::util::safe_close</a> (int fd)</td></tr>
<tr class="memdesc:ga05dc7ef7190e8678dbd2099b7266225d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe close. <br /></td></tr>
<tr class="separator:ga05dc7ef7190e8678dbd2099b7266225d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e69c4aa92e51c81be63ae7695868cdd"><td class="memItemLeft" align="right" valign="top"><a id="ga8e69c4aa92e51c81be63ae7695868cdd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga8e69c4aa92e51c81be63ae7695868cdd">scc::util::safe_close_throw</a> (int fd)</td></tr>
<tr class="memdesc:ga8e69c4aa92e51c81be63ae7695868cdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe close, throws system_error on error. <br /></td></tr>
<tr class="separator:ga8e69c4aa92e51c81be63ae7695868cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a4d49cc090f8c6ad1d8d03c0971c4d0"><td class="memItemLeft" align="right" valign="top"><a id="ga4a4d49cc090f8c6ad1d8d03c0971c4d0"></a>
ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga4a4d49cc090f8c6ad1d8d03c0971c4d0">scc::util::safe_read</a> (int fd, void *buf, size_t count)</td></tr>
<tr class="memdesc:ga4a4d49cc090f8c6ad1d8d03c0971c4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe read. <br /></td></tr>
<tr class="separator:ga4a4d49cc090f8c6ad1d8d03c0971c4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0bda1fe1aab63f152cfbbd3da412320d"><td class="memItemLeft" align="right" valign="top"><a id="ga0bda1fe1aab63f152cfbbd3da412320d"></a>
ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga0bda1fe1aab63f152cfbbd3da412320d">scc::util::safe_read_throw</a> (int fd, void *buf, size_t count)</td></tr>
<tr class="memdesc:ga0bda1fe1aab63f152cfbbd3da412320d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe read, throws system_error on error. <br /></td></tr>
<tr class="separator:ga0bda1fe1aab63f152cfbbd3da412320d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5bbfcb9313b7380d33e8745ca2205cbc"><td class="memItemLeft" align="right" valign="top"><a id="ga5bbfcb9313b7380d33e8745ca2205cbc"></a>
ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga5bbfcb9313b7380d33e8745ca2205cbc">scc::util::safe_write</a> (int fd, const void *buf, size_t count)</td></tr>
<tr class="memdesc:ga5bbfcb9313b7380d33e8745ca2205cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe write. <br /></td></tr>
<tr class="separator:ga5bbfcb9313b7380d33e8745ca2205cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e9d8b889d2d80d6e72e4d1c5903c215"><td class="memItemLeft" align="right" valign="top"><a id="ga1e9d8b889d2d80d6e72e4d1c5903c215"></a>
ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga1e9d8b889d2d80d6e72e4d1c5903c215">scc::util::safe_write_throw</a> (int fd, const void *buf, size_t count)</td></tr>
<tr class="memdesc:ga1e9d8b889d2d80d6e72e4d1c5903c215"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe write, throws system_error on error. <br /></td></tr>
<tr class="separator:ga1e9d8b889d2d80d6e72e4d1c5903c215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf061f566ea3da0d66fc3f48d4926593b"><td class="memItemLeft" align="right" valign="top"><a id="gaf061f566ea3da0d66fc3f48d4926593b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gaf061f566ea3da0d66fc3f48d4926593b">scc::util::safe_dup</a> (int oldfd)</td></tr>
<tr class="memdesc:gaf061f566ea3da0d66fc3f48d4926593b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe dup. <br /></td></tr>
<tr class="separator:gaf061f566ea3da0d66fc3f48d4926593b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82efa4f29075508d15f20fc5ab462f1e"><td class="memItemLeft" align="right" valign="top"><a id="ga82efa4f29075508d15f20fc5ab462f1e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga82efa4f29075508d15f20fc5ab462f1e">scc::util::safe_dup_throw</a> (int oldfd)</td></tr>
<tr class="memdesc:ga82efa4f29075508d15f20fc5ab462f1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe dup, throws system_error on error. <br /></td></tr>
<tr class="separator:ga82efa4f29075508d15f20fc5ab462f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacad9ecfed045c3154e9a1315c4960017"><td class="memItemLeft" align="right" valign="top"><a id="gacad9ecfed045c3154e9a1315c4960017"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gacad9ecfed045c3154e9a1315c4960017">scc::util::safe_dup2</a> (int oldfd, int newfd)</td></tr>
<tr class="memdesc:gacad9ecfed045c3154e9a1315c4960017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe dup2. <br /></td></tr>
<tr class="separator:gacad9ecfed045c3154e9a1315c4960017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b4357c1e78790d760bb0c01d03fca81"><td class="memItemLeft" align="right" valign="top"><a id="ga0b4357c1e78790d760bb0c01d03fca81"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga0b4357c1e78790d760bb0c01d03fca81">scc::util::safe_dup2_throw</a> (int oldfd, int newfd)</td></tr>
<tr class="memdesc:ga0b4357c1e78790d760bb0c01d03fca81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe dup2, throws system_error on error. <br /></td></tr>
<tr class="separator:ga0b4357c1e78790d760bb0c01d03fca81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3cf699bfd72e590f68f913ceb96bd0e"><td class="memItemLeft" align="right" valign="top"><a id="gab3cf699bfd72e590f68f913ceb96bd0e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gab3cf699bfd72e590f68f913ceb96bd0e">scc::util::safe_open</a> (const char *pathname, int flags)</td></tr>
<tr class="memdesc:gab3cf699bfd72e590f68f913ceb96bd0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe open. <br /></td></tr>
<tr class="separator:gab3cf699bfd72e590f68f913ceb96bd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02e0db55b76041b05e856fbff6ad41c0"><td class="memItemLeft" align="right" valign="top"><a id="ga02e0db55b76041b05e856fbff6ad41c0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga02e0db55b76041b05e856fbff6ad41c0">scc::util::safe_open</a> (const char *pathname, int flags, mode_t mode)</td></tr>
<tr class="memdesc:ga02e0db55b76041b05e856fbff6ad41c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe open. <br /></td></tr>
<tr class="separator:ga02e0db55b76041b05e856fbff6ad41c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa8d9b1879599530eb1d7ac1e186aa13"><td class="memItemLeft" align="right" valign="top"><a id="gaaa8d9b1879599530eb1d7ac1e186aa13"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gaaa8d9b1879599530eb1d7ac1e186aa13">scc::util::safe_open_throw</a> (const char *pathname, int flags)</td></tr>
<tr class="memdesc:gaaa8d9b1879599530eb1d7ac1e186aa13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe open, throws system_error on error. <br /></td></tr>
<tr class="separator:gaaa8d9b1879599530eb1d7ac1e186aa13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad793ad8962e37c1d0a300b353b2e8dc4"><td class="memItemLeft" align="right" valign="top"><a id="gad793ad8962e37c1d0a300b353b2e8dc4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gad793ad8962e37c1d0a300b353b2e8dc4">scc::util::safe_open_throw</a> (const char *pathname, int flags, mode_t mode)</td></tr>
<tr class="memdesc:gad793ad8962e37c1d0a300b353b2e8dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe open, throws system_error on error. <br /></td></tr>
<tr class="separator:gad793ad8962e37c1d0a300b353b2e8dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e8f21a54b11380f93daab9e4e1a4a49"><td class="memItemLeft" align="right" valign="top"><a id="ga3e8f21a54b11380f93daab9e4e1a4a49"></a>
FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga3e8f21a54b11380f93daab9e4e1a4a49">scc::util::safe_fopen</a> (const char *pathname, const char *mode)</td></tr>
<tr class="memdesc:ga3e8f21a54b11380f93daab9e4e1a4a49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe fopen. <br /></td></tr>
<tr class="separator:ga3e8f21a54b11380f93daab9e4e1a4a49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8e85eb692c9e798df37a887a66c0978"><td class="memItemLeft" align="right" valign="top"><a id="gaf8e85eb692c9e798df37a887a66c0978"></a>
FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gaf8e85eb692c9e798df37a887a66c0978">scc::util::safe_fopen_throw</a> (const char *pathname, const char *mode)</td></tr>
<tr class="memdesc:gaf8e85eb692c9e798df37a887a66c0978"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe fopen, throws system_error on error. <br /></td></tr>
<tr class="separator:gaf8e85eb692c9e798df37a887a66c0978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c6e70d233405165a9ce058d463942ae"><td class="memItemLeft" align="right" valign="top"><a id="ga9c6e70d233405165a9ce058d463942ae"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga9c6e70d233405165a9ce058d463942ae">scc::util::safe_fclose</a> (FILE *stream)</td></tr>
<tr class="memdesc:ga9c6e70d233405165a9ce058d463942ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe fclose. <br /></td></tr>
<tr class="separator:ga9c6e70d233405165a9ce058d463942ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga161fafd4a54135e1075f3fec033d6d88"><td class="memItemLeft" align="right" valign="top"><a id="ga161fafd4a54135e1075f3fec033d6d88"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga161fafd4a54135e1075f3fec033d6d88">scc::util::safe_fclose_throw</a> (FILE *stream)</td></tr>
<tr class="memdesc:ga161fafd4a54135e1075f3fec033d6d88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe fclose, throws system_error on error. <br /></td></tr>
<tr class="separator:ga161fafd4a54135e1075f3fec033d6d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a2bd565dfe102234cbc9ea3f2b51fe0"><td class="memItemLeft" align="right" valign="top"><a id="ga8a2bd565dfe102234cbc9ea3f2b51fe0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga8a2bd565dfe102234cbc9ea3f2b51fe0">scc::util::safe_fscanf</a> (FILE *stream, const char *format,...)</td></tr>
<tr class="memdesc:ga8a2bd565dfe102234cbc9ea3f2b51fe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe fscanf. <br /></td></tr>
<tr class="separator:ga8a2bd565dfe102234cbc9ea3f2b51fe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9380077802339d53244484c80229ce4"><td class="memItemLeft" align="right" valign="top"><a id="gad9380077802339d53244484c80229ce4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gad9380077802339d53244484c80229ce4">scc::util::safe_fscanf_throw</a> (FILE *stream, const char *format,...)</td></tr>
<tr class="memdesc:gad9380077802339d53244484c80229ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe fscanf, throw on error. <br /></td></tr>
<tr class="separator:gad9380077802339d53244484c80229ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a032e67486043fea78e4aeed13162a4"><td class="memItemLeft" align="right" valign="top"><a id="ga8a032e67486043fea78e4aeed13162a4"></a>
ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga8a032e67486043fea78e4aeed13162a4">scc::util::safe_getline</a> (char **lineptr, size_t *n, FILE *stream)</td></tr>
<tr class="memdesc:ga8a032e67486043fea78e4aeed13162a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe getline. <br /></td></tr>
<tr class="separator:ga8a032e67486043fea78e4aeed13162a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88178fb9b0e970e9facad44e548da1df"><td class="memItemLeft" align="right" valign="top"><a id="ga88178fb9b0e970e9facad44e548da1df"></a>
ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga88178fb9b0e970e9facad44e548da1df">scc::util::safe_getline_throw</a> (char **lineptr, size_t *n, FILE *stream)</td></tr>
<tr class="memdesc:ga88178fb9b0e970e9facad44e548da1df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe getline, throw on error. <br /></td></tr>
<tr class="separator:ga88178fb9b0e970e9facad44e548da1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab64f48d1d0fa06703b900ac6f8e30be2"><td class="memItemLeft" align="right" valign="top"><a id="gab64f48d1d0fa06703b900ac6f8e30be2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gab64f48d1d0fa06703b900ac6f8e30be2">scc::util::safe_truncate</a> (const char *path, off_t length)</td></tr>
<tr class="memdesc:gab64f48d1d0fa06703b900ac6f8e30be2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe truncate. <br /></td></tr>
<tr class="separator:gab64f48d1d0fa06703b900ac6f8e30be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5d36d7cefea8a6cd8be7fa0b5903352"><td class="memItemLeft" align="right" valign="top"><a id="gae5d36d7cefea8a6cd8be7fa0b5903352"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gae5d36d7cefea8a6cd8be7fa0b5903352">scc::util::safe_truncate_throw</a> (const char *path, off_t length)</td></tr>
<tr class="memdesc:gae5d36d7cefea8a6cd8be7fa0b5903352"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe truncate, throw on error. <br /></td></tr>
<tr class="separator:gae5d36d7cefea8a6cd8be7fa0b5903352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6e490c44abf9b26d00f8e16b1e41154"><td class="memItemLeft" align="right" valign="top"><a id="gae6e490c44abf9b26d00f8e16b1e41154"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gae6e490c44abf9b26d00f8e16b1e41154">scc::util::safe_ftruncate</a> (int fd, off_t length)</td></tr>
<tr class="memdesc:gae6e490c44abf9b26d00f8e16b1e41154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe ftruncate. <br /></td></tr>
<tr class="separator:gae6e490c44abf9b26d00f8e16b1e41154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b56d143b72f31894f370c05ed6fea99"><td class="memItemLeft" align="right" valign="top"><a id="ga9b56d143b72f31894f370c05ed6fea99"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga9b56d143b72f31894f370c05ed6fea99">scc::util::safe_ftruncate_throw</a> (int fd, off_t length)</td></tr>
<tr class="memdesc:ga9b56d143b72f31894f370c05ed6fea99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe ftruncate, throw on error. <br /></td></tr>
<tr class="separator:ga9b56d143b72f31894f370c05ed6fea99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fac5c0d702994d166404f92017a184d"><td class="memItemLeft" align="right" valign="top"><a id="ga4fac5c0d702994d166404f92017a184d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga4fac5c0d702994d166404f92017a184d">scc::util::safe_wait</a> (int *wstatus)</td></tr>
<tr class="memdesc:ga4fac5c0d702994d166404f92017a184d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe wait. <br /></td></tr>
<tr class="separator:ga4fac5c0d702994d166404f92017a184d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2805f5a80b2d412f0bbcf4163018d26"><td class="memItemLeft" align="right" valign="top"><a id="gac2805f5a80b2d412f0bbcf4163018d26"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#gac2805f5a80b2d412f0bbcf4163018d26">scc::util::safe_waitpid</a> (pid_t pid, int *wstatus, int options)</td></tr>
<tr class="memdesc:gac2805f5a80b2d412f0bbcf4163018d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe waitpid. <br /></td></tr>
<tr class="separator:gac2805f5a80b2d412f0bbcf4163018d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f28bce2648cffc6547e0fdac04a2313"><td class="memItemLeft" align="right" valign="top"><a id="ga0f28bce2648cffc6547e0fdac04a2313"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga0f28bce2648cffc6547e0fdac04a2313">scc::util::safe_wait_throw</a> (int *wstatus)</td></tr>
<tr class="memdesc:ga0f28bce2648cffc6547e0fdac04a2313"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe wait, throws system_error on error. <br /></td></tr>
<tr class="separator:ga0f28bce2648cffc6547e0fdac04a2313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga929aa0fa23b5524e2bbc08f6f278289d"><td class="memItemLeft" align="right" valign="top"><a id="ga929aa0fa23b5524e2bbc08f6f278289d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dff/group__util__safeclib.html#ga929aa0fa23b5524e2bbc08f6f278289d">scc::util::safe_waitpid_throw</a> (pid_t pid, int *wstatus, int options)</td></tr>
<tr class="memdesc:ga929aa0fa23b5524e2bbc08f6f278289d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal safe waitpid, throws system_error on error. <br /></td></tr>
<tr class="separator:ga929aa0fa23b5524e2bbc08f6f278289d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provides signal safe wrapper for commonly used C library APIs. </p>
<p>Generally, APIs which are capable of EINTR error when interrupted a signal are included.</p>
<p>See <a href="https://man7.org/linux/man-pages/man7/signal.7.html">https://man7.org/linux/man-pages/man7/signal.7.html</a></p>
<p>An example which uses safe clib apis to write into a sparse file, from <a class="el" href="../../d9/d2e/unittest_2fs_8cc.html">scclib/util/unittest/fs.cc</a> </p><div class="fragment"><div class="line"><a class="code" href="../../dd/d8d/unittest_2inet_8cc.html#a821ca81eacb859889b5efeae7ffa1997">TEST</a>(FsExampleTest, sparse_and_trunc)</div>
<div class="line">{</div>
<div class="line">    system_error err;</div>
<div class="line">    fs::remove_all(<span class="stringliteral">&quot;sandbox&quot;</span>, &amp;err);</div>
<div class="line">    <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ae9f80534d1d1150d33023f8162f7e097">fs::create_dir</a>(<span class="stringliteral">&quot;sandbox&quot;</span>);</div>
<div class="line">    <span class="keyword">auto</span> curdir = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a01371ec986f45bd7df354cb2c19af132">fs::get_current_dir</a>();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;curdir: &quot;</span> &lt;&lt; curdir &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ac8d1bfd313fff264e32a55c71a666e25">fs::change_dir</a>(<span class="stringliteral">&quot;sandbox&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">string</span> s(<span class="stringliteral">&quot;this is a test of the emergency sizing system\n&quot;</span>);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;sparse test with string len=&quot;</span> &lt;&lt; s.size() &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">string</span> fn(<span class="stringliteral">&quot;sparse_file&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> write_sparse = [&amp;fn, &amp;s](off_t loc)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// use clib to write data into the middle of the file</span></div>
<div class="line">        <span class="comment">// if we use fstream, the system may truncate the file</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// use system wrapper FileDesc to ensure the file is always closed</span></div>
<div class="line">        <a class="code" href="../../dc/da2/classscc_1_1util_1_1FileDesc.html">scc::util::FileDesc</a> fd(<a class="code" href="../../d2/dff/group__util__safeclib.html#gaaa8d9b1879599530eb1d7ac1e186aa13">scc::util::safe_open_throw</a>(fn.c_str(), O_WRONLY));</div>
<div class="line">        </div>
<div class="line">        lseek(fd, loc, SEEK_SET);</div>
<div class="line">        <a class="code" href="../../d2/dff/group__util__safeclib.html#ga1e9d8b889d2d80d6e72e4d1c5903c215">safe_write_throw</a>(fd, &amp;s[0], s.size());</div>
<div class="line">        </div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;wrote &quot;</span> &lt;&lt; s.size() &lt;&lt; <span class="stringliteral">&quot; bytes at loc &quot;</span> &lt;&lt; loc &lt;&lt; endl;</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a016ea00e151417b636e554996389530b">fs::create_reg</a>(fn);</div>
<div class="line">    <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ab08bd63a5c393f115fa045a250386c6d">fs::set_size</a>(fn, 16384);            <span class="comment">// 16 K file, with a 0 at the end</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">auto</span> st = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a9d20147e6e2f28b1f86d17c43e6a35b0">fs::file_stat</a>(fn);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;12288 hole at start of file:\n&quot;</span> &lt;&lt; st &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    ASSERT_EQ(st.size, 16384);</div>
<div class="line">    ASSERT_EQ(st.alloc_size, 4096);     <span class="comment">// the last block has data</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> sm = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#adfe3b464af051dd60ebbf73266a65db3">fs::sparse_map</a>(fn);</div>
<div class="line">    cout &lt;&lt; setw(6) &lt;&lt; <span class="stringliteral">&quot;start&quot;</span> &lt;&lt; setw(6) &lt;&lt; <span class="stringliteral">&quot;data&quot;</span> &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; x : sm)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; setw(6) &lt;&lt; x.first &lt;&lt; setw(6) &lt;&lt; x.second &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    std::map&lt;int64_t,int64_t&gt; ver;</div>
<div class="line">    </div>
<div class="line">    ver[0] = 12287;                     <span class="comment">// 12288 sized hole at 0 (beginning)</span></div>
<div class="line">    ASSERT_EQ(sm, ver);</div>
<div class="line"> </div>
<div class="line">    write_sparse(1024);                 <span class="comment">// write the string at 1024, causing first block to be written</span></div>
<div class="line">    </div>
<div class="line">    st = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a9d20147e6e2f28b1f86d17c43e6a35b0">fs::file_stat</a>(fn);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;8192 hole in middle of file\n&quot;</span> &lt;&lt; st &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    ASSERT_EQ(st.alloc_size, 8192);</div>
<div class="line"> </div>
<div class="line">    sm = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#adfe3b464af051dd60ebbf73266a65db3">fs::sparse_map</a>(fn);</div>
<div class="line">    cout &lt;&lt; setw(6) &lt;&lt; <span class="stringliteral">&quot;start&quot;</span> &lt;&lt; setw(6) &lt;&lt; <span class="stringliteral">&quot;data&quot;</span> &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; x : sm)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; setw(6) &lt;&lt; x.first &lt;&lt; setw(6) &lt;&lt; x.second &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ver.clear();</div>
<div class="line">    ver[4096] = 12287;                  <span class="comment">// 8192 sized hole at 4096 (middle)</span></div>
<div class="line">    ASSERT_EQ(sm, ver);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ab08bd63a5c393f115fa045a250386c6d">fs::set_size</a>(fn, 12288);</div>
<div class="line"> </div>
<div class="line">    st = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a9d20147e6e2f28b1f86d17c43e6a35b0">fs::file_stat</a>(fn);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;8192 hole at end of file\n&quot;</span> &lt;&lt; st &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">    ASSERT_EQ(st.alloc_size, 4096);</div>
<div class="line"> </div>
<div class="line">    sm = <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#adfe3b464af051dd60ebbf73266a65db3">fs::sparse_map</a>(fn);</div>
<div class="line">    cout &lt;&lt; setw(6) &lt;&lt; <span class="stringliteral">&quot;start&quot;</span> &lt;&lt; setw(6) &lt;&lt; <span class="stringliteral">&quot;data&quot;</span> &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; x : sm)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; setw(6) &lt;&lt; x.first &lt;&lt; setw(6) &lt;&lt; x.second &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ver.clear();</div>
<div class="line">    ver[4096] = 12287;                  <span class="comment">// 8192 sized hole at 4096 (end)</span></div>
<div class="line">    ASSERT_EQ(sm, ver);</div>
<div class="line"> </div>
<div class="line">    ifstream f(fn);</div>
<div class="line">    f.seekg(1024);</div>
<div class="line">    <span class="keywordtype">string</span> val;</div>
<div class="line">    val.resize(s.size(), <span class="stringliteral">&#39;\x01&#39;</span>);</div>
<div class="line">    f.read(&amp;val[0], val.size());</div>
<div class="line">    ASSERT_EQ(val, s);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ac8d1bfd313fff264e32a55c71a666e25">fs::change_dir</a>(curdir);</div>
<div class="line">    fs::remove_all(<span class="stringliteral">&quot;sandbox&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_adfe3b464af051dd60ebbf73266a65db3"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#adfe3b464af051dd60ebbf73266a65db3">scc::util::Filesystem::sparse_map</a></div><div class="ttdeci">static std::map&lt; off_t, off_t &gt; sparse_map(const std::string &amp;, std::system_error *=nullptr)</div><div class="ttdoc">Map of file sparseness.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00515">fs.cc:515</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1FileDesc_html"><div class="ttname"><a href="../../dc/da2/classscc_1_1util_1_1FileDesc.html">scc::util::FileDesc</a></div><div class="ttdoc">File descriptor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d55/filedesc_8h_source.html#l00065">filedesc.h:65</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_ab08bd63a5c393f115fa045a250386c6d"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ab08bd63a5c393f115fa045a250386c6d">scc::util::Filesystem::set_size</a></div><div class="ttdeci">static void set_size(const std::string &amp;, off_t, std::system_error *=nullptr)</div><div class="ttdoc">Set the file size.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00604">fs.cc:604</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_a01371ec986f45bd7df354cb2c19af132"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a01371ec986f45bd7df354cb2c19af132">scc::util::Filesystem::get_current_dir</a></div><div class="ttdeci">static std::string get_current_dir(std::system_error *=nullptr)</div><div class="ttdoc">Get working directory.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00444">fs.cc:444</a></div></div>
<div class="ttc" id="aunittest_2inet_8cc_html_a821ca81eacb859889b5efeae7ffa1997"><div class="ttname"><a href="../../dd/d8d/unittest_2inet_8cc.html#a821ca81eacb859889b5efeae7ffa1997">TEST</a></div><div class="ttdeci">TEST(inet_example, client_server_stream_test)</div><div class="ttdoc">[Inet client server]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d8d/unittest_2inet_8cc_source.html#l00521">inet.cc:521</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_ac8d1bfd313fff264e32a55c71a666e25"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ac8d1bfd313fff264e32a55c71a666e25">scc::util::Filesystem::change_dir</a></div><div class="ttdeci">static void change_dir(const std::string &amp;, std::system_error *=nullptr)</div><div class="ttdoc">Change working directory.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00430">fs.cc:430</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_a016ea00e151417b636e554996389530b"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a016ea00e151417b636e554996389530b">scc::util::Filesystem::create_reg</a></div><div class="ttdeci">static void create_reg(const std::string &amp;, std::system_error *=nullptr)</div><div class="ttdoc">Create a regular file.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00288">fs.cc:288</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_ae9f80534d1d1150d33023f8162f7e097"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#ae9f80534d1d1150d33023f8162f7e097">scc::util::Filesystem::create_dir</a></div><div class="ttdeci">static void create_dir(const std::string &amp;, std::system_error *=nullptr)</div><div class="ttdoc">Create a directory.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00274">fs.cc:274</a></div></div>
<div class="ttc" id="aclassscc_1_1util_1_1Filesystem_html_a9d20147e6e2f28b1f86d17c43e6a35b0"><div class="ttname"><a href="../../df/df9/classscc_1_1util_1_1Filesystem.html#a9d20147e6e2f28b1f86d17c43e6a35b0">scc::util::Filesystem::file_stat</a></div><div class="ttdeci">static FileStat file_stat(const std::string &amp;, std::system_error *=nullptr)</div><div class="ttdoc">Get the file stat.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de1/fs_8cc_source.html#l00390">fs.cc:390</a></div></div>
<div class="ttc" id="agroup__util__safeclib_html_ga1e9d8b889d2d80d6e72e4d1c5903c215"><div class="ttname"><a href="../../d2/dff/group__util__safeclib.html#ga1e9d8b889d2d80d6e72e4d1c5903c215">scc::util::safe_write_throw</a></div><div class="ttdeci">ssize_t safe_write_throw(int fd, const void *buf, size_t count)</div><div class="ttdoc">Signal safe write, throws system_error on error.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df5/safe__clib_8cc_source.html#l00152">safe_clib.cc:152</a></div></div>
<div class="ttc" id="agroup__util__safeclib_html_gaaa8d9b1879599530eb1d7ac1e186aa13"><div class="ttname"><a href="../../d2/dff/group__util__safeclib.html#gaaa8d9b1879599530eb1d7ac1e186aa13">scc::util::safe_open_throw</a></div><div class="ttdeci">int safe_open_throw(const char *pathname, int flags)</div><div class="ttdoc">Signal safe open, throws system_error on error.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df5/safe__clib_8cc_source.html#l00221">safe_clib.cc:221</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
